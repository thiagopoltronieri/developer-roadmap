import{a as d}from"./index.a98c85f5.js";const T=5,r=6,u=10;let v=(n,s,i,l)=>(n.events=n.events||{},n.events[i+u]||(n.events[i+u]=l(e=>{n.events[i].reduceRight((t,a)=>(a(t),t),{shared:{},...e})})),n.events[i]=n.events[i]||[],n.events[i].push(s),()=>{let e=n.events[i],t=e.indexOf(s);e.splice(t,1),e.length||(delete n.events[i],n.events[i+u](),delete n.events[i+u])}),g=1e3,p=(n,s)=>v(n,l=>{let e=s(l);e&&n.events[r].push(e)},T,l=>{let e=n.listen;n.listen=(...a)=>(!n.lc&&!n.active&&(n.active=!0,l()),e(...a));let t=n.off;return n.events[r]=[],n.off=()=>{t(),setTimeout(()=>{if(n.active&&!n.lc){n.active=!1;for(let a of n.events[r])a();n.events[r]=[]}},g)},()=>{n.listen=e,n.off=t}}),f=(n,s)=>{Array.isArray(n)||(n=[n]);let i,l=()=>{let t=n.map(a=>a.get());(i===void 0||t.some((a,c)=>a!==i[c]))&&(i=t,e.set(s(...t)))},e=d(void 0,Math.max(...n.map(t=>t.l))+1);return p(e,()=>{let t=n.map(a=>a.listen(l,e.l));return l(),()=>{for(let a of t)a()}}),e};const h=d([]),M=d(),m=f(M,n=>n?.role),A=f(m,n=>["admin"].includes(n)),N=f(m,n=>["admin","manager"].includes(n));export{A as $,N as a,M as b,h as c};
