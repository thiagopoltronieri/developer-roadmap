import{j as e}from"./jsx-runtime.391947bd.js";import{TeamDropdown as v}from"./TeamDropdown.fb0ebd59.js";import{D as k}from"./dropdown.e91a0d66.js";import{u as g}from"./use-team-id.b856293f.js";import{G as f}from"./group.ee80b7c2.js";import{r as s}from"./index.ed373d49.js";import{u as S}from"./index.9435383e.js";import{b as C}from"./team.12f2469e.js";import{u as F}from"./use-outside-click.54b69c89.js";import{u as T}from"./use-keydown.0305ad6b.js";import{h as $}from"./http.64a7434f.js";import{C as E}from"./CheckIcon.5f09e048.js";import"./use-auth.2b975076.js";import"./jwt.1b92699e.js";import"./Spinner.cc2f813e.js";import"./use-toast.fb52de5d.js";import"./toast.1fe7142d.js";import"./index.a98c85f5.js";const I={src:"/_astro/team-progress.e60f2c93.svg",width:24,height:24,format:"svg"},P={src:"/_astro/cog.f28a2108.svg",width:24,height:24,format:"svg"},b={src:"/_astro/chat.919a576a.svg",width:24,height:24,format:"svg"},D={src:"/_astro/map.ec2208d0.svg",width:24,height:24,format:"svg"};function R(a){const{onClose:c}=a,i=s.useRef(null),u=s.useRef(null),[m,d]=s.useState(!1),[o,r]=s.useState(""),[l,t]=s.useState(""),[n,j]=s.useState(!1),{teamId:w}=g();F(i,()=>{c()}),T("Escape",()=>{c()}),s.useEffect(()=>{u.current?.focus()},[]);const y=async x=>{x.preventDefault(),d(!0),r("");const{response:N,error:h}=await $(`https://api.roadmap.sh/v1-submit-team-feedback/${w}`,{feedback:l});if(h||!N){d(!1),r(h?.message||"Something went wrong");return}j(!0)},p=()=>{d(!1),r(""),t(""),c()};return e.jsx("div",{className:"fixed left-0 right-0 top-0 z-50 flex h-full items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50",children:e.jsx("div",{className:"relative h-full w-full max-w-md p-4 md:h-auto",children:e.jsxs("div",{ref:i,className:"popup-body relative rounded-lg bg-white p-4 shadow",children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mb-1 text-xl font-semibold text-black",children:"Enter your feedback"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Help us improve your experience."}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"my-4",children:[e.jsx("textarea",{ref:u,name:"submit-feedback",id:"submit-feedback",className:"mt-2 block min-h-[150px] w-full resize-none rounded-md border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400",placeholder:"Enter your feedback",required:!0,autoFocus:!0,value:l,onInput:x=>t(x.target.value)}),o&&e.jsx("p",{className:"mt-2 rounded-md bg-red-100 p-2 text-red-700",children:o})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:m,onClick:p,className:"flex-grow cursor-pointer rounded-md bg-gray-200 py-2 text-center",children:"Cancel"}),e.jsx("button",{disabled:m,type:"submit",className:"flex-grow cursor-pointer rounded-md bg-black py-2 text-white disabled:opacity-40",children:m?"Please wait ..":"Send"})]})]})]}),n&&e.jsxs("div",{className:"flex w-full flex-col items-center",children:[e.jsx(E,{additionalClasses:"w-14 h-14 text-green-500 mt-4"}),e.jsx("h1",{className:"mt-4 text-xl font-semibold text-black sm:text-2xl",children:"Feedback Submitted"}),e.jsx("p",{className:"text-center text-sm text-gray-500 sm:text-base",children:"Thank you for submitting your feedback."}),e.jsx("button",{type:"button",onClick:p,className:"mt-4 w-full flex-grow cursor-pointer rounded-lg bg-black py-2 text-center text-white disabled:opacity-40",children:"Close"})]})]})})})}function L({activePageId:a,children:c}){const[i,u]=s.useState(!1),m=S(C),[d,o]=s.useState(!1),{teamId:r}=g(),l=[{title:"Progress",href:`/team/progress?t=${r}`,id:"progress",icon:I.src},{title:"Roadmaps",href:`/team/roadmaps?t=${r}`,id:"roadmaps",icon:D.src,hasWarning:m?.roadmaps?.length===0},{title:"Members",href:`/team/members?t=${r}`,id:"members",icon:f.src},{title:"Settings",href:`/team/settings?t=${r}`,id:"settings",icon:P.src}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-5 block border-b p-4 shadow-inner md:hidden",children:[e.jsxs("button",{className:"flex h-10 w-full items-center justify-between rounded-md border bg-white px-2 text-center text-sm font-medium text-gray-900",id:"settings-menu","aria-haspopup":"true","aria-expanded":"true",onClick:()=>u(!i),children:[l.find(t=>t.id===a)?.title,e.jsx("img",{alt:"menu",src:k.src,className:"h-4 w-4"})]}),i&&e.jsxs("ul",{id:"settings-menu-dropdown",className:"absolute left-0 right-0 z-50 mt-1 space-y-1.5 bg-white p-2 shadow-lg",children:[e.jsx("li",{children:e.jsxs("a",{href:"/team",className:`flex w-full items-center rounded px-3 py-1.5 text-sm text-slate-900 hover:bg-slate-200 ${a==="team"?"bg-slate-100":""}`,children:[e.jsx("img",{alt:"teams",src:f.src,className:"mr-2 h-4 w-4"}),"Personal Account / Teams"]})}),l.map(t=>{const n=a===t.id;return e.jsx("li",{children:e.jsxs("a",{href:t.href,className:`flex w-full items-center rounded px-3 py-1.5 text-sm text-slate-900 hover:bg-slate-200 ${n?"bg-slate-100":""}`,children:[e.jsx("img",{alt:"menu icon",src:t.icon,className:"mr-2 h-4 w-4"}),t.title]})},t.id)}),e.jsx("li",{children:e.jsxs("button",{className:"flex w-full items-center rounded px-3 py-1.5 text-sm text-slate-900 hover:bg-slate-200",onClick:()=>o(!0),children:[e.jsx("img",{alt:"menu icon",src:b.src,className:"mr-2 h-4 w-4"}),"Send Feedback"]})})]})]}),d&&e.jsx(R,{onClose:()=>{o(!1)}}),e.jsxs("div",{className:"container flex min-h-screen items-stretch",children:[e.jsxs("aside",{className:"hidden w-44 shrink-0 border-r border-slate-200 py-10 md:block",children:[e.jsx(v,{}),e.jsxs("nav",{children:[e.jsx("ul",{className:"space-y-1",children:l.map(t=>{const n=a===t.id;return e.jsx("li",{children:e.jsx("a",{href:t.href,className:`font-regular flex w-full items-center border-r-2 px-2 py-1.5 text-sm ${n?"border-r-black bg-gray-100 text-black":"border-r-transparent text-gray-500 hover:border-r-gray-300"}`,children:e.jsxs("span",{className:"flex flex-grow items-center justify-between",children:[e.jsxs("span",{className:"flex",children:[e.jsx("img",{alt:"menu icon",src:t.icon,className:"relative top-[2px] mr-2 h-4 w-4"}),t.title]}),t.hasWarning&&e.jsxs("span",{className:"relative mr-1 flex items-center",children:[e.jsx("span",{className:"relative rounded-full bg-red-200 p-1 text-xs"}),e.jsx("span",{className:"absolute bottom-0 left-0 right-0 top-0 animate-ping rounded-full bg-red-400 p-1 text-xs"})]})]})})},t.id)})}),e.jsxs("button",{className:"mr-3 mt-4 flex items-center justify-center rounded-md border p-2 text-sm text-gray-500 transition-colors hover:border-gray-300 hover:bg-gray-50 hover:text-black",onClick:()=>o(!0),children:[e.jsx("img",{alt:"feedback",src:b.src,className:"mr-2 h-4 w-4"}),"Send Feedback"]})]})]}),e.jsx("div",{className:"grow px-0 py-0 md:px-10 md:py-10",children:c})]})]})}export{L as TeamSidebar};
