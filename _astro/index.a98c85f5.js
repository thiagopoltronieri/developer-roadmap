let t=[],a=(s,o)=>{let n=[],l={get(){return l.lc||l.listen(()=>{})(),l.value},l:o||0,lc:0,listen(i,u){return l.lc=n.push(i,u||l.l)/2,()=>{let e=n.indexOf(i);~e&&(n.splice(e,2),l.lc--,l.lc||l.off())}},notify(i){let u=!t.length;for(let e=0;e<n.length;e+=2)t.push(n[e],l.value,i,n[e+1]);if(u){for(let e=0;e<t.length;e+=4){let f=!1;for(let r=e+7;r<t.length;r+=4)if(t[r]<t[e+3]){f=!0;break}f?t.push(t[e],t[e+1],t[e+2],t[e+3]):t[e](t[e+1],t[e+2])}t.length=0}},off(){},set(i){l.value!==i&&(l.value=i,l.notify())},subscribe(i,u){let e=l.listen(i,u);return i(l.value),e},value:s};return l};export{a};
