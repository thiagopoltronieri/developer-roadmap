import{h as l,p as f}from"./hooks.module.6eb5c72e.js";import{a as x,b as w}from"./http.82ebf0f1.js";import{B as b}from"./building.0debfcad.js";import{E as v}from"./error.b0194164.js";import{p as o}from"./page.c1a8a472.js";import{i as y}from"./jwt.f0e0aa9c.js";import{s as I}from"./popup.a359f713.js";import{g as N}from"./browser.bcc09af3.js";import{o as e}from"./jsxRuntime.module.c6f75409.js";import"./preact.module.346aa314.js";import"./index.a98c85f5.js";function S(){const{i:n}=N(),[g,c]=l(!0),[s,i]=l(""),[m,u]=l(),p=y();async function h(a){const{response:t,error:r}=await x(`https://api.roadmap.sh/v1-get-invitation/${a}`);if(r||!t){i(r?.message||"Something went wrong");return}u(t)}f(()=>{n?h(n).finally(()=>{o.set(""),c(!1)}):(c(!1),i("Missing invite ID in URL"),o.set(""))},[n]);async function d(a){o.set("Please wait..."),i("");const{response:t,error:r}=await w(`https://api.roadmap.sh/v1-respond-invite/${n}`,{status:a});if(r||!t){i(r?.message||"Something went wrong");return}if(a==="reject"){window.location.href="/";return}window.location.href=`/team/progress?t=${t.teamId}`}return g?null:m?e("div",{className:"container text-center",children:[e("img",{alt:"join team",src:b,className:"mx-auto mb-4 mt-24 w-20 opacity-20"}),e("h2",{className:"mb-1 text-2xl font-bold",children:"Join Team"}),e("p",{class:"mb-3 text-base leading-6 text-gray-600",children:["You have been invited to join the team"," ",e("strong",{id:"team-name",children:m?.team?.name}),"."]}),!p&&e("div",{class:"mx-auto w-full duration-500 sm:max-w-md",children:e("div",{class:"flex w-full items-center gap-2",children:e("button",{onClick:()=>I(),"data-popup":"login-popup",type:"button",class:"flex-grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Login to respond"})})}),p&&e("div",{className:"mx-auto w-full max-w-md",children:[e("div",{className:"flex w-full items-center gap-2",children:[e("button",{type:"button",onClick:()=>d("accept").finally(()=>{o.set("")}),className:"flex-grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Accept"}),e("button",{type:"button",onClick:()=>d("reject").finally(()=>{o.set("")}),className:"flex-grow cursor-pointer rounded-lg bg-red-500 px-3 py-2 text-white disabled:opacity-40",children:"Reject"})]}),s&&e("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:s})]})]}):e("div",{className:"container text-center",children:[e("img",{alt:"error",src:v,className:"mx-auto mb-4 mt-24 w-20 opacity-20"}),e("h2",{className:"mb-1 text-2xl font-bold",children:"Error"}),e("p",{class:"mb-4 text-base leading-6 text-gray-600",children:s||"There was a problem, please try again."}),e("div",{children:e("a",{href:"/",className:"flex-grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Back to home"})})]})}export{S as RespondInviteForm};
