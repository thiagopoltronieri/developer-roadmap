import{j as e}from"./jsx-runtime.391947bd.js";import{r as p}from"./index.ed373d49.js";import{u as b}from"./use-copy-text.09bf10d7.js";import{u as y}from"./use-auth.2b975076.js";import{C as j}from"./copy.7975d749.js";import{a as w}from"./http.64a7434f.js";import{p as v}from"./page.c1a8a472.js";import"./jwt.1b92699e.js";import"./index.a98c85f5.js";function m(a){const{text:t,isDisabled:l,isSelected:n,onClick:o}=a;return e.jsx("button",{className:`rounded-md border p-1 px-2 text-sm ${n?" border-gray-500 bg-gray-300 ":""} ${l?" cursor-not-allowed opacity-40 ":" cursor-pointer "}`,onClick:o,children:t})}function N(a){const{selectedRoadmaps:t,setSelectedRoadmaps:l}=a,[n,o]=p.useState(),c=async()=>{const{response:s,error:r}=await w("https://api.roadmap.sh/v1-get-user-all-progress");r||!s||o(s)};p.useEffect(()=>{c().finally(()=>{v.set("")})},[]);const d=t.length<4,i=n?.filter(s=>s.resourceType==="roadmap")||[];return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i?.length===0&&e.jsx("p",{className:"text-sm italic text-gray-400",children:"No progress tracked so far."}),i?.map(s=>{const r=t.includes(s.resourceId),h=r||d;return e.jsx(m,{text:s.resourceTitle,isDisabled:!h,isSelected:r,onClick:()=>{r?l(t.filter(x=>x!==s.resourceId)):t.length<4&&l([...t,s.resourceId])}},s.resourceId)})]})}function k(){return e.jsxs("p",{className:"mt-3 rounded-md border p-2 text-sm w-full bg-yellow-100 border-yellow-400 text-yellow-900",children:["Add this badge to your"," ",e.jsx("a",{href:"https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-profile/customizing-your-profile/managing-your-profile-readme",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"GitHub profile readme."})]})}async function C({url:a,name:t,extension:l="png",scale:n=1}){try{const c=await(await fetch(a)).text(),d=`data:image/svg+xml;base64,${window.btoa(c)}`,i=new Image;i.src=d,i.onload=()=>{const s=document.createElement("canvas");s.width=i.width*n,s.height=i.height*n,s.getContext("2d")?.drawImage(i,0,0,s.width,s.height);const h=s.toDataURL("image/png",1),x=document.createElement("a");x.href=h,x.download=`${t}.${l}`,x.click()}}catch{alert("Error downloading image")}}function g(a){const{step:t}=a;return e.jsx("span",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-gray-300 text-white",children:t})}function f(a){const{text:t,title:l}=a,{isCopied:n,copyText:o}=b();return e.jsxs("div",{className:"flex w-full flex-grow flex-col overflow-hidden rounded border border-gray-300 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-gray-300 px-3 py-2",children:[e.jsx("span",{className:"text-xs uppercase leading-none text-gray-400",children:l}),e.jsxs("button",{className:"flex items-center",onClick:()=>o(t),children:[n&&e.jsx("span",{className:"mr-1 text-xs leading-none text-gray-700",children:"Copied!"}),e.jsx("img",{src:j.src,alt:"Copy",className:"inline-block h-4 w-4"})]})]}),e.jsx("textarea",{className:"no-scrollbar block h-12 w-full overflow-x-auto whitespace-nowrap bg-gray-200/70 p-3 text-sm text-gray-900 focus:bg-gray-50 focus:outline-0",readOnly:!0,onClick:c=>{c.target.select(),o(c.target.value)},value:t})]})}function u(a){const{label:t}=a;return e.jsx("span",{className:"mb-3 flex items-center gap-2 text-sm leading-none text-gray-400",children:t})}function M(){const{isCopied:a,copyText:t}=b(),[l,n]=p.useState([]),[o,c]=p.useState("tall"),[d,i]=p.useState("dark"),s=y();if(!s)return null;const r=new URL(`https://api.roadmap.sh/v1-badge/${o}/${s?.id}`);return r.searchParams.set("variant",d),l.length>0&&r.searchParams.set("roadmaps",l.join(",")),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4 mx-0 sm:-mx-10 px-0 sm:px-10 border-b pt-2 pb-4",children:[e.jsx(g,{step:1}),e.jsxs("div",{children:[e.jsx(u,{label:"Pick progress to show (Max. 4)"}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx(N,{selectedRoadmaps:l,setSelectedRoadmaps:n})})]})]}),e.jsxs("div",{className:"flex items-start gap-4 mx-0 sm:-mx-10 px-0 sm:px-10 border-b py-4",children:[e.jsx(g,{step:2}),e.jsxs("div",{children:[e.jsx(u,{label:"Select Mode (Dark vs Light)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{text:"Dark",isDisabled:!1,isSelected:d==="dark",onClick:()=>{i("dark")}}),e.jsx(m,{text:"Light",isDisabled:!1,isSelected:d==="light",onClick:()=>{i("light")}})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 mx-0 sm:-mx-10 px-0 sm:px-10 border-b py-4",children:[e.jsx(g,{step:3}),e.jsxs("div",{children:[e.jsx(u,{label:"Select Version"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{text:"Tall",isDisabled:!1,isSelected:o==="tall",onClick:()=>{c("tall")}}),e.jsx(m,{text:"Wide",isDisabled:!1,isSelected:o==="wide",onClick:()=>{c("wide")}})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 mx-0 sm:-mx-10 px-0 sm:px-10 border-b py-4",children:[e.jsx(g,{step:4}),e.jsxs("div",{className:"flex-grow",children:[e.jsx(u,{label:"Share your #RoadCard with others"}),e.jsx("div",{className:"rounded-md border bg-gray-50 p-2 text-center",children:e.jsx("a",{href:r.toString(),target:"_blank",rel:"noopener noreferrer",className:`relative block hover:cursor-pointer ${o==="tall"?" max-w-[270px] ":" w-full "}`,children:e.jsx("img",{src:r.toString(),alt:"RoadCard"})})}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsx("button",{className:"flex items-center justify-center rounded border border-gray-300 p-1.5 px-2 text-sm font-medium",onClick:()=>C({url:r.toString(),name:"road-card",scale:4}),children:"Download"}),e.jsxs("button",{disabled:a,className:"flex cursor-pointer items-center justify-center rounded border border-gray-300 p-1.5 px-2 text-sm font-medium disabled:bg-blue-50",onClick:()=>t(r.toString()),children:[e.jsx("img",{alt:"Copy",src:j.src,className:"mr-1"}),a?"Copied!":"Copy Link"]})]}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[e.jsx(f,{title:"HTML",text:`<a href="https://roadmap.sh"><img src="${r}" alt="roadmap.sh"/></a>`.trim()}),e.jsx(f,{title:"Markdown",text:`[![roadmap.sh](${r})](https://roadmap.sh)`.trim()})]}),e.jsx(k,{})]})]})]})}export{M as RoadCardPage};
