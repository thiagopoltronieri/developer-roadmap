import{j as o}from"./jsx-runtime.391947bd.js";import{r as s}from"./index.ed373d49.js";import{h}from"./http.64a7434f.js";import{a as b,T as x}from"./jwt.1b92699e.js";function S(){const[c,m]=s.useState(""),[a,f]=s.useState(""),[n,p]=s.useState(""),[l,r]=s.useState(!1),[d,i]=s.useState("");s.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("code");t?m(t):window.location.href="/login"},[]);const g=async e=>{if(e.preventDefault(),r(!0),a!==n){r(!1),i("Passwords do not match.");return}const{response:t,error:u}=await h("https://api.roadmap.sh/v1-reset-forgotten-password",{newPassword:a,confirmPassword:n,code:c});if(u?.message){r(!1),i(u.message);return}if(!t?.token){r(!1),i("Something went wrong. Please try again later.");return}const w=t.token;b.set(x,w,{path:"/",expires:30,domain:".roadmap.sh"}),window.location.href="/"};return o.jsxs("form",{className:"mx-auto w-full",onSubmit:g,children:[o.jsx("input",{type:"password",className:"mb-2 mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"New Password",value:a,onInput:e=>f(e.target.value)}),o.jsx("input",{type:"password",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"Confirm New Password",value:n,onInput:e=>p(e.target.value)}),d&&o.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:d}),o.jsx("button",{type:"submit",disabled:l,className:"mt-2 inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:l?"Please wait...":"Reset Password"})]})}export{S as ResetPasswordForm};
